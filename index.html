<!doctypehtml><html lang=en><meta charset=UTF-8><meta content="width=device-width,initial-scale=1"name=viewport><title>Image Compare Tool</title><style>body,html{height:100%;margin:0;font-family:Arial,sans-serif;overflow:hidden;user-select:none;background-color:#f0f0f0}.container{position:relative;height:100%;width:100%}.img-container{height:100%;width:100%;overflow:hidden;position:absolute;top:0;left:0}.img{position:absolute;top:0;left:0;height:100%;width:100%;transform-origin:top left}.imgA{clip:rect(0,50vw,100vh,0)}.slider{position:absolute;top:0;bottom:0;width:4px;background-color:#fff;cursor:ew-resize;z-index:100}.slider:before{content:'';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:20px;height:20px;background-color:#fff;border:2px solid #000;border-radius:50%;z-index:101}.dropdown-container{position:absolute;top:10px;left:10px;z-index:200;font-size:1.2em;color:#333}.dropdown{margin:0 5px;padding:5px;border:1px solid #ccc;border-radius:5px;background-color:#fff;color:#333}.zoom-container{position:absolute;bottom:10px;right:10px;z-index:200;font-size:1.2em;color:#333}.zoom-button{margin:0 5px;padding:5px 10px;background-color:#fff;border:1px solid #000;cursor:pointer;border-radius:3px;color:#333}</style><div class=container id=image-compare-container><div class=img-container><img class=img id=imgB src=FP_2024.jpg></div><div class=img-container><img class="img imgA"id=imgA src=FP_2002.jpg></div><div class=slider id=slider style=left:50%></div><div class=dropdown-container><label for=dataset>Dataset:</label> <select class=dropdown id=dataset><option value=FP>FP<option value=CWE>CWE<option value=North>North</select> <select class=dropdown id=selectA><option value=FP_2002.jpg>2002<option value=FP_2006.jpg>2006<option value=FP_2020.jpg>2020<option value=FP_2024.jpg>2024</select> <select class=dropdown id=selectB><option value=FP_2002.jpg>2002<option value=FP_2006.jpg>2006<option value=FP_2020.jpg>2020<option value=FP_2024.jpg selected>2024</select></div><div class=zoom-container><button class=zoom-button id=zoom-in>Zoom In</button> <button class=zoom-button id=zoom-out>Zoom Out</button></div></div><script>const container = document.getElementById('image-compare-container');
        const slider = document.getElementById('slider');
        const imgA = document.getElementById('imgA');
        const imgB = document.getElementById('imgB');
        const selectA = document.getElementById('selectA');
        const selectB = document.getElementById('selectB');
        const dataset = document.getElementById('dataset');
        const zoomInBtn = document.getElementById('zoom-in');
        const zoomOutBtn = document.getElementById('zoom-out');

        let startX = 0;
        let startY = 0;
        let active = false;
        let zoomLevel = 1;
        let sliderPosition = 0.5; // Keep track of the slider's position as a fraction
        let panX = 0;
        let panY = 0;

        slider.addEventListener('mousedown', (e) => {
            active = true;
            startX = e.clientX - slider.offsetLeft;
            document.addEventListener('mousemove', onDrag);
            document.addEventListener('mouseup', onStopDrag);
        });

        function onDrag(e) {
            if (!active) return;
            let x = e.clientX - startX;
            x = Math.max(0, Math.min(x, container.offsetWidth));
            sliderPosition = x / container.offsetWidth;
            slider.style.left = `${x}px`;
            updateClip();
        }

        function onStopDrag() {
            active = false;
            document.removeEventListener('mousemove', onDrag);
            document.removeEventListener('mouseup', onStopDrag);
        }

        selectA.addEventListener('change', (e) => {
            imgA.src = e.target.value;
        });

        selectB.addEventListener('change', (e) => {
            imgB.src = e.target.value;
        });

        dataset.addEventListener('change', (e) => {
            const dataset = e.target.value;
            selectA.innerHTML = `
                <option value="${dataset}_2002.jpg">2002</option>
                <option value="${dataset}_2006.jpg">2006</option>
                <option value="${dataset}_2020.jpg">2020</option>
                <option value="${dataset}_2024.jpg">2024</option>
            `;
            selectB.innerHTML = `
                <option value="${dataset}_2002.jpg">2002</option>
                <option value="${dataset}_2006.jpg">2006</option>
                <option value="${dataset}_2020.jpg">2020</option>
                <option value="${dataset}_2024.jpg" selected>2024</option>
            `;
            imgA.src = `${dataset}_2002.jpg`;
            imgB.src = `${dataset}_2024.jpg`;
        });

        container.addEventListener('wheel', (e) => {
            e.preventDefault();
            zoom(e.clientX, e.clientY, e.deltaY * -0.01);
        });

        zoomInBtn.addEventListener('click', () => {
            zoom(container.offsetWidth / 2, container.offsetHeight / 2, 0.1);
        });

        zoomOutBtn.addEventListener('click', () => {
            zoom(container.offsetWidth / 2, container.offsetHeight / 2, -0.1);
        });

        function zoom(clientX, clientY, delta) {
            const rect = container.getBoundingClientRect();
            const offsetX = clientX - rect.left;
            const offsetY = clientY - rect.top;

            const prevZoomLevel = zoomLevel;
            zoomLevel = Math.min(Math.max(1, zoomLevel + delta), 5);

            const scaleChange = zoomLevel / prevZoomLevel;

            const newOffsetX = offsetX * scaleChange;
            const newOffsetY = offsetY * scaleChange;

            const dx = newOffsetX - offsetX;
            const dy = newOffsetY - offsetY;

            panX -= dx;
            panY -= dy;

            updateTransform();
            updateClip();
        }

        container.addEventListener('mousedown', (e) => {
            if (e.target !== slider) {
                active = true;
                startX = e.clientX - panX;
                startY = e.clientY - panY;
                document.addEventListener('mousemove', onPan);
                document.addEventListener('mouseup', onStopPan);
            }
        });

        function onPan(e) {
            if (!active) return;
            panX = e.clientX - startX;
            panY = e.clientY - startY;
            updateTransform();
        }

        function onStopPan() {
            active = false;
            document.removeEventListener('mousemove', onPan);
            document.removeEventListener('mouseup', onStopPan);
        }

        function updateTransform() {
            imgA.style.transform = `scale(${zoomLevel}) translate(${panX / zoomLevel}px, ${panY / zoomLevel}px)`;
            imgB.style.transform = `scale(${zoomLevel}) translate(${panX / zoomLevel}px, ${panY / zoomLevel}px)`;
        }

        function updateClip() {
            imgA.style.clip = `rect(0, ${sliderPosition * 100}vw, 100vh, 0)`;
        }

        updateClip();</script>
